<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Schema Editor</title>

  <!-- a Reset CSS, to cancel any browser-specifics -->
  <link rel="stylesheet" href="css/normalize.css" />

  <link rel="stylesheet" href="lib/jquery-ui/jquery-ui.css" />

  <!-- 3-column layout using CSS3 flexbox -->
  <link rel="stylesheet" href="css/columns.css" />

  <!-- make 3-column layout pretty -->
  <link rel="stylesheet" href="css/default-theme.css" />

  <!-- specific to Schema Editor -->
  <link rel="stylesheet" href="css/schema-edit.css" />

  <!-- *** Javascript *** -->

  <!-- markdown processor -->
  <script src="js/lib/marked.js"></script>

  <!-- mustache template compiler -->
  <script src="js/lib/hogan-3.0.2.js"></script>

  <!-- jQuery + jQueryUI -->
  <script src="js/lib/jquery-1.10.2.js"></script>
  <script src="lib/jquery-ui/jquery-ui.js"></script>

  <script src="lib/upload/js/vendor/jquery.ui.widget.js"></script>
  <script src="lib/upload/js/jquery.iframe-transport.js"></script>
  <script src="lib/upload/js/jquery.fileupload.js"></script>

  <script src="js/combobox.js"></script>

  <!-- date formatting -->
  <script src="js/lib/moment.js"></script>

  <!-- for converting turtle to ntriples for upload via sparql update -->
  <!-- script src="js/lib/rdf-ext.js.map"></script -->
  <script src="js/lib/n3-browser.js"></script>

  <!-- TODO return to these
<script src="js/lib/wysihtml5x-toolbar.js"></script>
<script src="js/lib/advanced_and_extended.js"></script>
-->

  <!-- local scripts -->
  <script src="js/config.js"></script>
  <script src="js/sparql-connector.js"></script>

  <!-- Schema Editor Specific -->
  <script src="js/schema-edit.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/sparql-templates.js"></script>

  <!-- TODO refactor scripts to more appropriate files -->
  <script type="text/javascript" language="javascript">
    $(function() {
      SchemaEdit.init();
      SparqlConnector.init();
      spinner();

      var graph = queryString["graph"];

      // TODO use parseUri
      var uri = queryString["uri"];
      if ((!uri || uri == "") && (!graph || graph == "")) {
        // alert("undefined");
        SchemaEdit.makeNewVocabBlock();
        return;
      }
      uri = encodeURI(uri);

      $("#currentResource").text(uri);
      $("#resource").text(uri);

      // SchemaEdit.setCurrentResource(uri);
      SchemaEdit.makeClassesList();
      SchemaEdit.makePropertiesList();

      var uri = queryString["uri"];
      if (uri) { // TODO need to check if this if() is working
        // console.log("URI="+uri);
        uri = encodeURI(uri);
        SchemaEdit.populateWithResource(uri);
      }

      refresh(); // redraws flex columns

    });
  </script>
</head>

<body>
  <div id="dialog">popup/alert dialog</div>

  <div id="spinner" class="spinner"></div>

  <div id="header">
    <h2>Schema Editor</h2>

    <div id="newVocabBlock">
      <a href="#uploadRDF">Upload RDF</a>
      <h4>Create New Vocab</h4>
      <label for="vocabName">Name</label>
      <input id="vocabName" type="text" name="vocabName" title="name of vocab" />
      <label for="vocabNamespace">Namespace (used as Graph Name)</label>
      <input id="vocabNamespace" type="text" name="vocabNamespace" title="namespace of vocab" />
      <label for="vocabPrefix">Preferred Prefix</label>
      <input id="vocabPrefix" type="text" name="vocabPrefix" title="vocab preferred prefix" />
      <button id="newVocabButton">Create Vocab</button>
    </div>

    <div id="currentGraphBlock">
      <strong>
        Current Graph :
      </strong>
      <div id="currentGraph">
        <span id="graphChooser"></span>
      </div>
    </div>

    <br/>
    <div id="currentResourceBlock">
      <strong>
        Current Resource :
      </strong>
      <div id="currentR">
        <span id="resourceChooser"></span>
      </div>
    </div>
  </div>

  <div id="wrapper">

    <!--*** Left Panel *** -->
    <div id="left">
      <div class="list-block">
        <h2 class="header">Classes</h2>
        <div id="classes" class="small"></div>
      </div>

      <div class="list-block">
        <h2 class="header">Properties</h2>
        <div id="properties" class="small"></div>
      </div>
    </div>

    <!--*** Center Panel *** -->
    <div id="center">

      <div id="editor"></div>

      <div id="addClass">
        <h4>Add Class</h4>

        <label for="className">Class Name</label>
        <input id="className" title="enter text" />

        <label for="classLabel">rdfs:label</label>
        <input id="classLabel" title="enter human-readable version of name" />

        <label for="subClassOf">rdfs:subClassOf</label>
        <input id="subClassOf" title="enter parent class" />

        <label for="classComment">rdfs:comment</label>
        <input id="classComment" title="enter human-readable description" />

        <button id="addClassButton">Add Class</button>
      </div>

      <hr/>

      <div id="addPropertyBlock">
        <h4>Add Property</h4>

        <label for="propertyName">Property Name</label>
        <input id="propertyName" title="enter text" />

        <label for="propertyLabel">rdfs:label</label>
        <input id="propertyLabel" title="enter human-readable version of name" />

        <label for="propertyComment">rdfs:comment</label>
        <input id="propertyComment" title="enter human-readable description" />

        <label for="subPropertyOf">rdfs:subPropertyOf</label>
        <input id="subPropertyOf" title="enter parent property" />

        <label for="domain">rdfs:domain</label>
        <input id="domain" title="enter domain class" />

        <label for="range">rdfs:range</label>
        <input id="range" title="enter range class" />

        <button id="addPropertyButton">Add Property</button>
      </div>

      <hr/>

      <div id="addPropertyValueBlock">
        <!-- class="ui-widget" -->
        <h4>Add Property Value</h4>
        <div id="propertyChooser">
          <!-- label for="addProperty">Add Property</label -->
        </div>
        <label for="propertyLiteralValue">Literal Value : </label>
        <input id="propertyLiteralValue" title="enter text (leave blank for URI value)" />

        <div id="propertyUriValue">
          <label for="uriValue">URI Value : </label>
        </div>

        <button id="addPropertyValueButton">Add</button>
      </div>

      <div>
        <em>TODO checkbox for inherit</em>
      </div>
      <div>
        <em>TODO add prefix/URI mapping</em>
      </div>
      <hr/>

      <a name="uploadRDF" />
      <h3>Upload RDF</h3>
      <!-- TODO change this from config -->
      <!-- form action="http://sandbox.fusepool.info:8181/sparql/update" enctype="multipart/form-data" method="post" -->
      <!-- TODO move to config (bypass Fuseki) -->
      <!-- onsubmit="window.location.href = 'index.html'; return false;" -->
      <!-- TODO UNSET FILE NAME ?? -->
      <form id="upload" enctype="text/turtle" method="post">
        <input id="uploadFilename" type="file" name="uploadFilename" size="40" multiple="true" />
        <br/>
        <br/>
        <label for='graphName'>Graph</label>
        <input name="graph" id="graphName" size="20" value="https://example.org/" />
        <!-- http://schema.org/terms/ -->
        <br />
        <!-- input type="submit" value="Upload" class='button' / -->
        <!-- button id="uploadGraph">Upload</button -->
        <!-- input id="uploadGraph" type="submit" form="upload" / -->
        <button id="uploadGraph">Upload</button>
      </form>

      <hr/>

      <h3>Export Turtle</h3>
      <button id="turtle">Export</button>

      <hr/>

      <div class="endpoints">
        <strong>Endpoint Settings</strong>
        <br/>
        <div>
          <label for="endpointHost"><a id="endpointLink">Endpoint Host</a></label>
          <input id="endpointHost" type='text' value=''></input>
        </div>
        <div>
          <label for="queryPath">Query Path</label>
          <input id="queryPath" type="text" value=""></input>
        </div>
        <div>
          <label for="updatePath">Update Path</label>
          <input id="updatePath" type="text" value=""></input>
        </div>
        <button id="endpointButton">Set New Values</button>
      </div>

    </div>
    <div id="right">
      <!--*** Right Panel *** -->
      <h2>History</h2>
    </div>

  </div>
  <div id="footer">

  </div>

  <div id="language-radio">
    <form id="language-form">
      <input value="en" class="language-radio" type="radio" id="language-en" name="language" checked="checked">
      <label for="language-en">
        <span></span>en</label>
      <input value="de" class="language-radio" type="radio" id="language-de" name="language">
      <label for="language-de">
        <span></span>de</label>
      <input value="it" class="language-radio" type="radio" id="language-it" name="language">
      <label for="language-it">
        <span></span>it</label>
    </form>
  </div>

</body>

</html>
